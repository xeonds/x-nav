# app

A new Flutter project.

## TODO

### 页面结构

- 主页/信息统计页
    - [x] 训练日志
    - [x] 最佳成绩
    - 训练负荷 | 训练目标
    - 骑行路线
- 地图页
    - 骑行历史热力图/路线图
    - [x] 路书/赛段轨迹图
- 路书页
    - 路书/赛段列表：查看，导入/导出，删除
        - 路书详情
        - 路书创建
        - [x] 成绩历史列表
        - [x] 成绩详情页
- 历史页
    - 骑行历史列表
        - 数据筛选
        - 单月数据统计
    - 单次骑行详情
    - 骑行历史导入/导出
- 我的页
    - 设置
    - 个人信息
        - 身高体重
    - 最佳记录

### 功能列表

- 路书
- 赛段：这个暂时就和路线合并一块计算了
    - 赛段匹配
    - 赛段成绩历史
- 数据分析
    - 里程用时记录
    - 爬升记录
    - 最大速度记录
- 地图增强
    - 热力图
    - 展示赛段记录
- 详情展示
    - 统计图数据下展示数据平均值，最大值和其他额外数据项
    - 统计图支持点击展示数据

#### 成绩分析

这部分需要实现的功能有点复杂，成绩分析包含多种类型的数据，同时还要分析他们的名次关系。

所以形成这么一个抽象，可分析的数据都能进行排名，且可以引用其中任意一个记录，并可以获取对象的名次。

实现的方法：

带有泛型参数的名次器创建，泛型参数是要获取名次的数据项，创建时要传入若干排序方法，每个方法接收两个泛型参数，返回值是一个布尔值，表示第一个参数是否大于第二个参数。
此外还应该具有一个含有泛型的结构体队列，且具有add方法，可以将该类型的数据附加到队列末尾。结构体类似关系数据库的表的一行，第一个元素是原始泛型数据，后面的参数则是按照传入的排序方法们进行计算，维护当前每个记录按照各个排序算法计算得到的名次。

举例子来说，有一个运动记录数据类型，我希望将所有的运动记录按照其5个成员变量分别排序，最终，我可以获得每个运动记录的5个字段之一在所有运动记录中按照规则排序的名次。

目前存在的成绩主要是两类，一个是全局最佳成绩，另一个是赛段成绩。算法部分的排名策略是，对于单次运动记录和单次的赛段记录，只计算截止当次的成绩，且不计算当前记录的名次。

## 使用的库

- [3schweinehunde/fit_parser: Fit file format parser library written in Dart](https://github.com/3schweinehunde/fit_parser)