# 页面说明+功能文档

这里写点想做的功能，后面跟上

- 更强大完备的路线库
- 个人数据备份与恢复
- 更有用的地图页
  - 团骑&消息&成员实时位置展示
  - 完善的快速导航功能
  - 骑行记录功能
    - A屏息屏显示低功耗导航
    - 记录模式更加无感，后台服务一样的存在，不阻塞其他功能的使用
  - 历史路段实时比较功能
    - 匹配到当前点和某一路段起点重合，并走完了特定长度的一段后，开始卡片展示此刻和之前路段的秒差
    - 路段完成后，或者当前轨迹偏离一定距离后判定重合轨迹结束，给出实时统计信息反馈，例如秒差，均速，功率等
    - 可选开启
- 退出确认
- 更详细的路段信息分析
- 更详细的骑行记录分析
  - 各种fit文件中已有的数据
  - 更多的图表
  - 地图层支持叠加显示热力图
- 离线路网+离线路径计算功能
  - 交叉编译OSRM计算库
  - 离线路网数据包管理
- 离线地图包功能
- 信息分析缓存功能
  - sqlite存储分析后的fit数据和gpx数据
  - 分析的最佳成绩等使用不同的数据表来存储
  - 插入新记录后自动开始增量分析
  - 借助多阶段的缓存加速app速度，减少重复计算的性能开销
- 更多数据格式的支持

## 主页

目前只是信息展示，后面可以加点功能入口之类的

- 周骑行量可视化
- 月骑行日历+月骑行量统计
- 骑行最佳历史记录列表

## 地图

作为历史记录和路书的展示处。同时作为地图本身发挥指路作用，支持短途导航功能，记录功能以及实时算路功能。

- 地图展示，支持地图瓦片缓存功能
- 路书展示
- 骑行历史展示，支持热力图模式
- 定位当前位置
  - 测算功能

### 测算功能

信号差时需要能够离线计算当前点到目标点的路线，支持测算距离/爬升/海拔数据等

- 测算当前点到目标点的距离/爬升/海拔数据等
- 计算当前点到目标点的路线
  - 算完的路线可以保存为路书/导出分享为gpx文件

## 路线库/路书

展示所有的路书，且支持查看路书详情

因为gpx库的bug，目前不支持编辑路书的一些字段，只以为默认文件名展示路书轨迹。

- 展示路线长度
- 路线轨迹展示
- 路书导入导出
- 路书制作
- 路书信息编辑
- 展示路书详细信息，包括爬升和任意点的海拔信息等

### 路书制作

目前支持混合手动/路网算法制作任意自由度路书，路书轨迹点的重定位/排序功能

后续可以尝试支持添加其他gpx路径轨迹进行路线组合，创建反向路线，路线信息展示

- 路线信息展示：路线里程，预估时间，路线爬升信息和海拔信息折线图等
- 引用路线库/骑行记录轨迹，并支持修剪片段来组合使用
  - 作为一个实体在路径点列表中展示
  - 支持定义路线片段的方向
  - 路线点列表中展示点类型，是导航点/自定义点/路书片段/骑行记录片段
- 创建反向路线
  - 对于本次创建的路线进行反向路线的创建，点击后保存为xxx-反向，不退出编辑器
  - 暂时不考虑双车道/来去路径不同的问题，直接将点序列反转

## 骑行历史

展示骑行历史记录列表，并支持分析单次骑行记录的详细信息

目前主要包括路段匹配和最佳里程用时记录，分时段最大功率记录，最大爬升/海拔/功率/速度等记录

- 骑行详细信息展示
- 本次最佳成绩
- 路段匹配
- 数据图表展示
- 子区间信息展示

### 路段分析

支持子路段记录排名，目前不支持更详细的子区间信息查看，只能看看均速用时排名这些的

- 路段地图
- 路段信息统计
- 路段历史记录及排名

## 我的

一堆修复用小功能分重分析功能，以及帮助文档

后续支持管理一些功能的开关，以及一些策略的选择

- 计算缓存功能开关
